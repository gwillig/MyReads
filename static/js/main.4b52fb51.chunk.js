(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{45:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),o=n.n(s),c=n(20),r=n.n(c),i=n(11),l=n(12),h=n(14),d=n(13),u=(n(45),n(63)),b=n(64),j=n(27),f=n(65),p=n(61),O=n(60),k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={book:e.props.book,open:!1},e.getStyle=function(e){if(e.book.imageLinks)return{width:128,height:192,backgroundImage:"url(".concat(e.book.imageLinks.thumbnail,")")}},e.get_description=function(e){try{return e.props.book.description.substring(0,100)}catch(t){return"No description"}},e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.getAttribute("data-bookid");this.props.handleChange(n,t)}},{key:"render",value:function(){var e=this,t=this.state.open;return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:"book",children:[Object(a.jsxs)("div",{className:"book-top",children:[Object(a.jsx)("div",{className:"book-cover",style:this.getStyle(this.state),onClick:function(){return e.setState({open:!t})},"aria-controls":"example-collapse-text","aria-expanded":t}),Object(a.jsx)("div",{className:"book-shelf-changer",children:Object(a.jsxs)("select",{"data-bookid":this.state.book.id,value:this.state.book.shelf,onChange:this.handleChange.bind(this),children:[Object(a.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(a.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(a.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(a.jsx)("option",{value:"read",children:"Read"}),Object(a.jsx)("option",{value:"none",children:"None"})]})})]}),Object(a.jsx)("div",{className:"book-title",children:this.state.book.title}),Object(a.jsx)("div",{className:"book-authors",children:this.state.book.authors?this.state.book.authors.toString():"Unkown"}),Object(a.jsx)("div",{children:Object(a.jsx)(O.a,{in:this.state.open,children:Object(a.jsxs)("div",{id:"example-collapse-text",children:[this.get_description(this),Object(a.jsx)("a",{href:"".concat(this.state.book.previewLink),target:"noreferrer",children:"...[MORE]"})]})})})]})},this.state.book.id)}}]),n}(o.a.Component),v=n(23),x="https://reactnd-books-api.udacity.com",g=localStorage.token;g||(g=localStorage.token=Math.random().toString(36).substr(-8));var y={Accept:"application/json",Authorization:g},m=function(){return fetch("".concat(x,"/books"),{headers:y}).then((function(e){return e.json()})).then((function(e){return e.books}))},R=function(e,t){return fetch("".concat(x,"/books/").concat(e.id),{method:"PUT",headers:Object(v.a)(Object(v.a)({},y),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},C=function(e){return fetch("".concat(x,"/search"),{method:"POST",headers:Object(v.a)(Object(v.a)({},y),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},S=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).searchBooks=function(e){var t=e.target.value;""!==t?C(t).then((function(e){e.error?a.setState({searchResult:[]}):(a.state.books.map((function(t){return e.map((function(e){return"Pro React"===t.title&&"Pro React"===e.title||t.id===e.id?(e.shelf=t.shelf,e):"undefined"===typeof e.shelf?(e.shelf="none",e):e})),t})),a.setState({searchResult:e}))})):a.setState({searchResult:[]})},a.state={books:[],searchResult:[],tabs:[{id:1,defaultActiveKey:"currentlyReading",title:"Current Readings"},{id:2,defaultActiveKey:"wantToRead",title:"Want to Read"},{id:3,defaultActiveKey:"read",title:"Read"}]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;m().then((function(t){e.setState({books:t})}))}},{key:"handleChange",value:function(e,t){var n=this;this.setState({books:this.state.books.map((function(n){return n.id===e&&(n.shelf=t,R(n,t)),n}))}),this.setState({searchResult:this.state.searchResult.map((function(a){return a.id===e&&(a.shelf=t,n.setState({books:[].concat(Object(j.a)(n.state.books),[a])}),R(a,t)),a}))})}},{key:"render",value:function(){var e=this,t={minHeight:"65vh",backgroundColor:"#CEDFD4"};return Object(a.jsxs)(f.a,{defaultActiveKey:"search",id:"uncontrolled-tab-example",children:[this.state.tabs.map((function(n){return Object(a.jsx)(p.a,{style:t,eventKey:n.defaultActiveKey,title:n.title,children:Object(a.jsx)("div",{className:"bookshelf",children:Object(a.jsx)("div",{className:"bookshelf-books",children:Object(a.jsx)("ol",{className:"books-grid",children:e.state.books.filter((function(e){return e.shelf===n.defaultActiveKey})).map((function(t){return Object(a.jsx)(k,{book:t,handleChange:e.handleChange.bind(e)},t.id)}))})})})},n.id)})),Object(a.jsx)(p.a,{style:t,eventKey:"search",title:"Search",children:Object(a.jsx)("div",{className:" tab-item-wrapper",children:Object(a.jsxs)("div",{className:"bookshelf-books",children:[Object(a.jsx)("div",{className:"input-group mb-3",children:Object(a.jsx)("input",{style:{margin:"10px"},onChange:this.searchBooks,type:"text",className:"form-control",placeholder:"Search Author"})},"searchField"),Object(a.jsx)("ol",{className:"books-grid",children:this.state.searchResult.map((function(t){return Object(a.jsx)(k,{book:t,handleChange:e.handleChange.bind(e)},t.id)}))})]})})})]})}}]),n}(o.a.Component),N=n(62),A=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).style_head={backgroundColor:"rgb(23 70 135 / 0%)",color:"rgb(255 255 255)"},e.span_style={color:"#63ff72"},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(N.a,{style:this.style_head,children:[Object(a.jsxs)("h1",{children:["My Reads",Object(a.jsx)("span",{style:this.span_style,children:"."})]}),Object(a.jsx)("h3",{children:"The clever way to organise your ebooks"})]})}}]),n}(o.a.Component);var w=function(){return Object(a.jsx)("div",{style:{backgroundColor:"#CEDFD4",width:"100%"},children:Object(a.jsx)("h5",{style:{textAlign:"right"},children:" \xa9 All rights reserved. Designed by Gustav Willig"})})},K=(n(52),n(21)),T=n(5),D=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).searchBooks=function(e){var t=e.target.value;""!==t?C(t).then((function(e){e.error?a.setState({searchResult:[]}):(a.state.books.map((function(t){return e.map((function(e){return"Pro React"===t.title&&"Pro React"===e.title||t.id===e.id?(e.shelf=t.shelf,e):"undefined"===typeof e.shelf?(e.shelf="none",e):e})),t})),a.setState({searchResult:e}))})):a.setState({searchResult:[]})},a.state={searchResult:[],books:a.props.books},a}return Object(l.a)(n,[{key:"handleChange",value:function(e,t){var n=this;this.setState({searchResult:this.state.searchResult.map((function(a){return a.id===e&&(a.shelf=t,n.setState({books:[].concat(Object(j.a)(n.state.books),[a])}),R(a,t)),a}))})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"search-books",children:[Object(a.jsxs)("div",{className:"search-books-bar",children:[Object(a.jsx)(K.b,{to:"/",children:Object(a.jsx)("button",{className:"close-search"})}),Object(a.jsx)("div",{className:"search-books-input-wrapper",children:Object(a.jsx)("input",{onChange:this.searchBooks,type:"text",placeholder:"Search by title or author"})})]}),Object(a.jsx)("div",{className:"search-books-results",children:Object(a.jsx)("ol",{className:"books-grid",children:this.state.searchResult.map((function(t){return Object(a.jsx)(k,{book:t,handleChange:e.handleChange.bind(e)},t.id)}))})})]})}}]),n}(o.a.Component),M=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={books:[],searchResult:[],tabs:[{id:1,defaultActiveKey:"currentlyReading",title:"Current Readings"},{id:2,defaultActiveKey:"wantToRead",title:"Want to Read"},{id:3,defaultActiveKey:"read",title:"Read"}]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;m().then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(K.a,{children:[Object(a.jsx)(T.a,{exact:!0,path:"/",render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(u.a,{style:{backgroundColor:"#17a2b8"},children:Object(a.jsx)(b.a,{children:Object(a.jsx)(A,{})})}),Object(a.jsx)(u.a,{style:{backgroundColor:"#17a2b8"},children:Object(a.jsx)(b.a,{style:{paddingRight:" 0px"},children:Object(a.jsx)(S,{})})}),Object(a.jsx)(u.a,{noGutters:!0,children:Object(a.jsx)(w,{})}),Object(a.jsx)("div",{className:"open-search",children:Object(a.jsx)(K.b,{to:"/search",children:Object(a.jsx)("button",{children:"Add a book"})})})]})}}),Object(a.jsx)(T.a,{path:"/search",render:function(t){return Object(a.jsx)(D,{books:e.state.books})}})]})}}]),n}(o.a.Component);n(56),n(57);r.a.render(Object(a.jsx)(M,{}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.4b52fb51.chunk.js.map